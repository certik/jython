<HTML>
<!-- THIS PAGE IS AUTOMATICALLY GENERATED.  DO NOT EDIT. -->
<!-- USING THE NEW HT2HTML SCRIPT: Thu Jun  3 17:23:36 1999 -->
<!-- User-specified headers:
Title: Compiling Python Source to Real Java Classes

-->

<HEAD>
<TITLE>Compiling Python Source to Real Java Classes</TITLE>

</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000"
      TOPMARGIN="0" LEFTMARGIN="0" MARGINWIDTH="0" MARGINHEIGHT="0"
      LINK="#0000bb"  VLINK="#551a8b"
      ALINK="#ff0000">
<!-- start of page table -->
<TABLE WIDTH="100%" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<!-- start of banner row -->
<TR>
<!-- start of corner cells -->
<TD WIDTH=150 VALIGN=CENTER BGCOLOR="#cdb7b5">

<center>
    <a href="http://www.jpython.org/">
    <img border=0 src="./images/jpython-new-small.gif"></a></center> </TD>
<TD WIDTH=15 BGCOLOR="#cdb7b5">&nbsp;&nbsp;</TD><!--spacer-->
<!-- end of corner cells -->
<!-- start of banner -->
<TD WIDTH="90%" BGCOLOR="#cdb7b5">
<!-- start of site links table -->
<TABLE WIDTH="100%" BORDER=0
CELLSPACING=0 CELLPADDING=2
       COLS=2 ROWS=2 BGCOLOR="#ffffff">
<TR>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.jpython.org/">Home</a>
    </TD>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.python.org/">www.python.org</a>
    </TD>
</TR><TR>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.jpython.org/download.html">Download</a>
    </TD>
    <TD BGCOLOR="#cdb7b5">
<a href="./index.html">Documentation</a>
    </TD>
</TR>
</TABLE><!-- end of site links table -->

</TD><!-- end of banner -->
</TR><!-- end of banner row -->
<TR><!-- start of sidebar/body row -->
<!-- start of sidebar cells -->
<TD WIDTH=150 VALIGN=TOP BGCOLOR="#cdb7b5">
<!-- start of sidebar table -->
<TABLE WIDTH="100%" BORDER=0 CELLSPACING=0 CELLPADDING=3
       BGCOLOR="#ffffff">
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Documentation
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="./index.html">Overview</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="whatis.html">Executive Summary</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="interpreter.html">Invoking JPython</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="registry.html">JPython Registry</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="embedding.html">Embedding</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="compile.html">Compiling JPython from source</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Working with Java
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="usejava.html">The Basics</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="properties.html">JavaBean Properties</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="jarray.html">Java arrays</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="subclassing.html">Subclassing</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<b>Building applets, servlets, beans...</b>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Python Docs (exits)
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/doc/tut/tut.html">Python Tutorial</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/doc/lib/lib.html">Library Reference</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Other
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="differences.html">JPython vs. CPython</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="faq.html">JPython FAQ</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/pipermail/jpython-interest/">List Archives</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/workshops/1997-10/proceedings/hugunin.html">JPython paper</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Email Us
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="mailto:jpython@python.org">jpython@python.org</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
&nbsp;
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/">
<center>
    <img border=0 src="./images/PythonPoweredSmall.gif"></center>
</A>
</TD></TR>
</TABLE><!-- end of sidebar table -->

</TD>
<TD WIDTH=15>&nbsp;&nbsp;</TD><!--spacer-->
<!-- end of sidebar cell -->
<!-- start of body cell -->
<TD VALIGN=TOP WIDTH="90%"><BR>
<h3>Compiling Python Source to Real Java Classes - jpythonc</h3>

<P>The previous section describes how Python classes can be created
that subclass from Java classes.  This works very well when you want
to pass a Python class into Java from JPython.  This is not adequate
for building real Java ".class" files that implement a Java class and
can be passed directly to Java programs.  This sort of functionality
is required to build applets, servlets, or JavaBeans in JPython that
can be used exactly like their Java equivalents.  It is also very
valuable for users who wish to subclass Python classes in Java.</P>

<P>In order to build a real java class from a Python class, you will
use the jpythonc tool.  A script to access jpythonc should have been
installed in the JPython installation directory when you installed the
package.  If it was not, it can be invoked as follows: 
"jpython&nbsp;Tools\jpythonc\jpythonc.py".</P>

<P>This script accepts the following arguments:</P>

<P><B>jpythonc</B> [<B>-jar</B> jarfile] [<B>-cab</B> cabfile] 
[<B>-dir</B> directory] <I>[-main]<B> </B></I>
[<B>-core</B> | -<B>all</B>] [<B>-deep</B>] [<B>-lib</B> libraries] 
[-<B>skip</B> modules] [module]* <BR>

<p><TABLE BORDER="1">
<TR>
    <TD><B>-jar</B> jarfile</TD>
    <TD>Specifies a .jar file to create and put the results of the
	freeze into.
	<br>Not really useful for "shallow" freezes</TD>
</TR><TR>
    <TD><B>-cab</B> cabfile</TD>
    <TD>Specifies a .cab file to create and put the files into.
        <BR>This only works with Microsoft's JVM (.cab is a MS format)</TD>
</TR><TR>
    <TD><B>-dir</B> directory</TD>
    <TD>Specifies that the files should be put into the given directory.  
        <BR>If none of the first three options are specified, -dir '.'
        is assumed</TD>
</TR><TR>
    <TD><I>-main</I></TD>
    <TD><I>Might be added to create a main method in generated class</I>
	<BR><I>Will only be added if someone convinces me it's
	necessary</I></TD>
</TR><TR>
    <TD><B>-core</B></TD>
    <TD>Include the core JPython libraries (about 130K)
	<BR>Needed for applets since Netscape doesn't yet support
	multiple archives</TD>
</TR><TR>
    <TD>-<B>all</B></TD>
    <TD>Include all of the JPython libraries (everything in core +
	compiler and parser)</TD>
</TR><TR>
    <TD><B>-deep</B></TD>
    <TD>Compile both this one class and all dependencies.
	<BR>This is used for creating applets</TD>
</TR><TR>
    <TD>-<B>bean </B>jarfile</TD>
    <TD>Creates a .jar file containing a bean
	<BR>The correct manifest file will be generated and included</TD>
</TR><TR>
    <TD><B>-lib</B> libraries</TD>
    <TD>Specifies a set of libraries (delimited by the platform's path
	separator character)
	<BR>Dependencies in these libraries will not be included in
	the result of the freeze.
	<BR>This option only makes sense when combined with <B>-deep</B></TD>
</TR><TR>
    <TD>-<B>skip </B>modules</TD>
    <TD>Specifies a comma-separated list of modules not to freeze, or
	include in archive</TD>
</TR><TR>
    <TD><B>-useproxy</B></TD>
    <TD><B>For Expert Users Only!</B>
	<BR>The generated proxy class will be a shell around the
	standard JPython proxy class
	<BR>You must have a cached copy of the appropriate proxy class
	to use this flag</TD> 
</TR><TR>
    <TD>module*</TD>
    <TD>A list of Python modules to freeze
	<BR>Can be either modules names that are on the python.path or
	.py files</TD>
</TR>
</TABLE>

<p>The Python module must contain a Python class with the same name as
the module, and that Python class must subclass exactly one Java class
or interface.  The real Java class created will be a subclass of
whatever Java class is subclassed.


</TD><!-- end of body cell -->
</TR><!-- end of sidebar/body row -->
</TABLE><!-- end of page table -->
<!-- start of continued wide-body text -->

<h3>Examples</h3>

<P>On my Windows NT machine, I used the following command to create
the file appletdemo.jar (containing all of the applet demos on the web
site, as well as the core JPython libraries):</P>

<PRE>c:\jpython\Demo\applet&gt; jpythonc -core -deep -jar appletdemo.jar *.py</PRE>

<P>To generate a skeleton class to allow a Python class to be used as
java.awt.Component in a Java gui program, I used the following
command:</P>

<PRE>c:\jpython\Demo\javaclasses&gt; jpythonc Graph.py</PRE>

<P>To generate a JPython-based bean I do the following:</P>

<PRE>c:\jpython\Demo\bean&gt; jpythonc -deep -bean f2c.jar conversion.FahrenheitToCelsius</PRE>

<P>To use this with SUN's BDK, I do the following (the important steps
are to make the bean and the JPython libraries known to the tool).</P>

<ol>
    <li>modify BDK\beanbox\run.bat (or run.sh) to include the
	jpython\JavaCode in the CLASSPATH
    <li>copy f2c.jar to BDK\jars
</ol>

<P>You should now be able to access the FahrenheitToCelsius bean from
SUN's BeanBox (or other Bean-aware tool).

<!-- end of continued wide-body text -->
</BODY></HTML>
